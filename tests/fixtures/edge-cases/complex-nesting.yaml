openapi: 3.0.0
info:
  title: Complex Nesting API
  version: 1.0.0

components:
  schemas:

    # Deeply nested objects (10+ levels)
    DeepNesting:
      type: object
      properties:
        level1:
          type: object
          properties:
            level2:
              type: object
              properties:
                level3:
                  type: object
                  properties:
                    level4:
                      type: object
                      properties:
                        level5:
                          type: object
                          properties:
                            level6:
                              type: object
                              properties:
                                level7:
                                  type: object
                                  properties:
                                    level8:
                                      type: object
                                      properties:
                                        level9:
                                          type: object
                                          properties:
                                            level10:
                                              type: string
                                              minLength: 1

    # Deeply nested arrays (10+ levels)
    DeepArrayNesting:
      type: object
      properties:
        matrix:
          type: array
          items:
            type: array
            items:
              type: array
              items:
                type: array
              maxItems: 3

    # Mixed nesting
    MixedNesting:
      type: object
      properties:
        data:
          type: object
          properties:
            users:
              type: array
              items:
                type: object
                properties:
                  profile:
                    type: object
                    properties:
                      settings:
                        type: object
                        properties:
                          preferences:
                            type: array
                            items:
                              type: object
                              properties:
                                value:
                                  type: string

    # Arrays in objects in arrays
    NestedArraysAndObjects:
      type: object
      properties:
        items:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              tags:
                type: array
                items:
                  type: string
              metadata:
                type: object
                properties:
                  attributes:
                    type: array
                    items:
                      type: object
                      properties:
                        key:
                          type: string
                        value:
                          type: string

    # AllOf with nested structures
    AllOfNesting:
      allOf:
        - type: object
          properties:
            base:
              type: string
        - type: object
          properties:
            extended:
              type: object
              properties:
                nested:
                  type: string

    # AnyOf with nested structures
    AnyOfNesting:
      anyOf:
        - type: object
          properties:
            optionA:
              type: object
              properties:
                data:
                  type: string
        - type: object
          properties:
            optionB:
              type: object
              properties:
                info:
                  type: string

paths:
  /test/nesting:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeepNesting'
      responses:
        '200':
          description: OK
